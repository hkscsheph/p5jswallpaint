let lastX, lastY;
let droplets = [];
const points = [
  [
      73.55255187220838,
      181.32429472063478
  ],
  [
      75.51456976962726,
      181.61263622957222
  ],
  [
      77.50812806904783,
      181.88754185000178
  ],
  [
      79.4899502822662,
      182.14226899996657
  ],
  [
      81.47568628041277,
      182.378406029153
  ],
  [
      83.4641127248936,
      182.59515037737376
  ],
  [
      85.45400429279537,
      182.79171335905247
  ],
  [
      87.44413455836919,
      182.96732148182522
  ],
  [
      89.43327688873121,
      183.1212177864102
  ],
  [
      91.43513233186752,
      183.25356459482015
  ],
  [
      93.43304545422421,
      183.36236413795018
  ],
  [
      95.4257898469623,
      183.446918741929
  ],
  [
      97.42630459922107,
      183.50688814699015
  ],
  [
      99.41869403685233,
      183.54091142630486
  ],
  [
      101.4290215377538,
      183.54828052209734
  ],
  [
      103.42774728314262,
      183.5277369645882
  ],
  [
      105.42677144818192,
      183.47830292999114
  ],
  [
      107.42409313948217,
      183.39889276547353
  ],
  [
      109.41771344798249,
      183.28846168313746
  ],
  [
      111.4179244472546,
      183.14502568426536
  ],
  [
      113.4098967971766,
      182.96824489637243
  ],
  [
      115.39164699390041,
      182.75722389804852
  ],
  [
      117.3840909590247,
      182.50804465199113
  ],
  [
      119.36124688218575,
      182.2222811281702
  ],
  [
      121.33203683414601,
      181.89733020106164
  ],
  [
      123.30424066619467,
      181.52994261962002
  ],
  [
      125.26391856911017,
      181.12077650317323
  ],
  [
      127.2083089113307,
      180.66886722803588
  ],
  [
      129.14435605185224,
      180.17074456167464
  ],
  [
      131.0590776638782,
      179.6279444979066
  ],
  [
      132.97701705353683,
      179.03100831048098
  ],
  [
      134.86650753825882,
      178.38734989257634
  ],
  [
      136.74187418957868,
      177.6901383311308
  ],
  [
      138.59873608418266,
      176.93832788894088
  ],
  [
      140.43276767836701,
      176.1311072569621
  ],
  [
      142.23971313925344,
      175.26792099222075
  ],
  [
      144.0154010598768,
      174.34849152995548
  ],
  [
      145.7557595581444,
      173.37284176998853
  ],
  [
      147.456831759667,
      172.34131823732704
  ],
  [
      149.13965135800396,
      171.23766898020824
  ],
  [
      150.761327637742,
      170.08775129132428
  ],
  [
      152.3537034904244,
      168.86710243714802
  ],
  [
      153.89911197168868,
      167.5857230813848
  ],
  [
      155.382704978677,
      166.2549391923995
  ],
  [
      156.82006129925915,
      164.85930493802536
  ],
  [
      158.19624590979515,
      163.41138054031134
  ],
  [
      159.51507165940106,
      161.90601994353534
  ],
  [
      160.76361318950796,
      160.35772850141208
  ],
  [
      161.96528493499756,
      158.73492343139648
  ],
  [
      163.0856371525079,
      157.08286245185138
  ],
  [
      164.1334012029801,
      155.39166663761122
  ],
  [
      165.1131652705909,
      153.65392782585977
  ],
  [
      166.02567619503964,
      151.8659461273374
  ],
  [
      166.8608148577586,
      150.04627032653067
  ],
  [
      167.61624734704404,
      148.20121173679175
  ],
  [
      168.29737471519525,
      146.3150338274734
  ],
  [
      168.89518664407933,
      144.40713556497067
  ],
  [
      169.4083628819127,
      142.472645014373
  ],
  [
      169.82925935300648,
      140.5165661871666
  ],
  [
      170.14199418643977,
      138.544987239738
  ],
  [
      170.31994000656192,
      136.55705021579516
  ],
  [
      170.425208372811,
      134.55555954062936
  ],
  [
      170.45839655538447,
      132.55721025034532
  ],
  [
      170.41684033480334,
      130.56395315819975
  ],
  [
      170.29588001134232,
      128.5504098672024
  ],
  [
      170.09494416262487,
      126.56023514145241
  ],
  [
      169.8135689323716,
      124.59405981778733
  ],
  [
      169.44620080025956,
      122.62721126732603
  ],
  [
      168.99291445921693,
      120.67438572317387
  ],
  [
      168.45605799297974,
      118.74881669319188
  ],
  [
      167.83606100835482,
      116.85068995178936
  ],
  [
      167.1335713384496,
      114.98008078185096
  ],
  [
      166.3494630235133,
      113.13694974367515
  ],
  [
      165.49022677491223,
      111.33186683962836
  ],
  [
      164.5584002814841,
      109.56370257672124
  ],
  [
      163.55665138026458,
      107.83125976400956
  ],
  [
      162.49427744390485,
      106.14319174294424
  ],
  [
      161.3615477465497,
      104.4780755688655
  ],
  [
      160.18907112084895,
      102.87299296759302
  ],
  [
      158.95295074947023,
      101.28759684933611
  ],
  [
      157.68622818680518,
      99.75709317389509
  ],
  [
      156.36276266464122,
      98.2429105401896
  ],
  [
      155.0176509173885,
      96.7785792966187
  ],
  [
      153.62288576767753,
      95.3271035761942
  ],
  [
      152.21524158821373,
      93.92053827053209
  ],
  [
      150.76522233419408,
      92.5232628921182
  ],
  [
      149.3109024748959,
      91.16605703040351
  ],
  [
      147.82167463980585,
      89.81447542272979
  ],
  [
      146.33653585304995,
      88.49822251100122
  ],
  [
      144.82414496012774,
      87.18382810279726
  ],
  [
      143.30616862193398,
      85.88492214680154
  ],
  [
      141.7687964431301,
      84.58429919769645
  ],
  [
      140.24297277186193,
      83.30256634573475
  ],
  [
      138.70618012123526,
      82.01509502245958
  ],
  [
      137.171787801358,
      80.72728574114154
  ],
  [
      135.65305549120316,
      79.44429804117576
  ],
  [
      134.13724212840208,
      78.14911207376718
  ],
  [
      132.62123871487756,
      76.83202435876834
  ],
  [
      131.11940535626758,
      75.49785075136316
  ],
  [
      129.64574633367263,
      74.15128928385303
  ],
  [
      128.19814285296198,
      72.78212755560875
  ],
  [
      126.76828042745646,
      71.37226989582601
  ],
  [
      125.37930086708414,
      69.93324124564575
  ],
  [
      124.0387414556343,
      68.46153985370853
  ],
  [
      122.74167138056217,
      66.93779808577156
  ],
  [
      121.49892066161263,
      65.35729390589177
  ],
  [
      120.33326334673907,
      63.73112476053834
  ],
  [
      119.25428283313438,
      62.054735356517604
  ],
  [
      118.26568844896424,
      60.314576483745014
  ],
  [
      117.38395155129113,
      58.532050823547884
  ],
  [
      116.61877349326477,
      56.68373279009667
  ],
  [
      116.0011661867499,
      54.76636683493853
  ],
  [
      115.57816638898846,
      52.81274022531509
  ],
  [
      115.39273895888411,
      50.834526052613164
  ],
  [
      115.49919939963061,
      48.8341229591904
  ],
  [
      115.95144988722271,
      46.895382034433425
  ],
  [
      116.78544263059653,
      45.0809347197566
  ],
  [
      117.99391212216143,
      43.48422910584149
  ],
  [
      119.51354643146783,
      42.1878904826222
  ],
  [
      121.25702399969097,
      41.231957710742954
  ],
  [
      123.16898047649113,
      40.620670475818216
  ],
  [
      125.13961918216941,
      40.372551497161396
  ],
  [
      127.13743897155493,
      40.49392769668473
  ],
  [
      129.06997715349573,
      41.0120245693276
  ],
  [
      130.8310147135155,
      41.95455634918716
  ],
  [
      132.27992429070915,
      43.32457528654486
  ],
  [
      133.2732977309385,
      45.05117126129847
  ],
  [
      133.74902761820795,
      46.981377492721194
  ],
  [
      133.75977757587185,
      48.98290222335328
  ],
  [
      133.5631745524406,
      50.96168808603287
  ],
  [
      133.48313731345868,
      52.96420970142901
  ],
  [
      133.5490702523589,
      54.96614808923006
  ],
  [
      133.7847490272745,
      56.94055367095024
  ],
  [
      134.22587368440622,
      58.90726472997666
  ],
  [
      134.8890430616551,
      60.78373060533812
  ],
  [
      135.79936165491392,
      62.555831197966825
  ],
  [
      136.96291847776897,
      64.18034344337974
  ],
  [
      138.3562725904062,
      65.61499649550765
  ],
  [
      139.92768661230892,
      66.85829161387962
  ],
  [
      141.36349877929686,
      68.20893920898438
  ],
  [
      142.69371421104665,
      69.71173545151949
  ],
  [
      144.08590057229247,
      71.13810528060048
  ],
  [
      145.52074757242536,
      72.53445615935152
  ],
  [
      146.98487550143767,
      73.8956516152519
  ],
  [
      148.4824827268347,
      75.22091371165962
  ],
  [
      150.01835018364335,
      76.49946484715491
  ],
  [
      151.6106377876183,
      77.71444330670603
  ],
  [
      153.27958698480478,
      78.80764701597673
  ],
  [
      155.11840874467043,
      79.5724598255232
  ],
  [
      156.38753920561072,
      78.42262086868286
  ],
  [
      156.03780930919197,
      76.47483810663223
  ],
  [
      155.249349609375,
      74.62928125
  ],
  [
      154.29746666239478,
      72.87997099345922
  ],
  [
      153.2442695069313,
      71.17860781860351
  ],
  [
      152.12145238081828,
      69.5178059745431
  ],
  [
      150.94702573156354,
      67.90643807983398
  ],
  [
      152.4966756421849,
      66.70919805769623
  ],
  [
      153.9496280166516,
      65.34664180187323
  ],
  [
      155.25043531672932,
      63.83550497886352
  ],
  [
      156.39337084048984,
      62.180206625342365
  ],
  [
      157.33991535175682,
      60.43373351311125
  ],
  [
      158.09982059626,
      58.57559350440093
  ],
  [
      158.7026327641904,
      56.67205251316098
  ],
  [
      159.06423454467577,
      54.71133700992089
  ],
  [
      159.1563532962799,
      52.72099852566421
  ],
  [
      159.0242732672803,
      50.71340029830337
  ],
  [
      158.70966083726282,
      48.75075206253236
  ],
  [
      158.23483247898886,
      46.797878089265524
  ],
  [
      157.62697245546056,
      44.88980959331044
  ],
  [
      156.90263846204058,
      43.02690346528564
  ],
  [
      156.07219566845893,
      41.20623835187219
  ],
  [
      155.1495151049793,
      39.43886319385306
  ],
  [
      154.13772250488398,
      37.718293905572736
  ],
  [
      153.035483125817,
      36.03750619609785
  ],
  [
      151.86073978015776,
      34.42027781886444
  ],
  [
      150.60962157616018,
      32.85857842600835
  ],
  [
      149.28788861785455,
      31.35972134743227
  ],
  [
      147.9010895497687,
      29.93054260718785
  ],
  [
      146.43988946017248,
      28.564350502285905
  ],
  [
      144.90739564904942,
      27.269247769593
  ],
  [
      143.3227293243408,
      26.06484735620022
  ],
  [
      141.65759291818736,
      24.93533641680866
  ],
  [
      139.94767790630831,
      23.91079401031623
  ],
  [
      138.17998718261717,
      22.987576676368718
  ],
  [
      136.3575375489853,
      22.17355116483642
  ],
  [
      134.48334580728408,
      21.476584225589644
  ],
  [
      132.56042875938488,
      20.904542608498687
  ],
  [
      130.61150877952946,
      20.468965612556293
  ],
  [
      128.62070901163293,
      20.171199550133984
  ],
  [
      126.63191535137219,
      20.020451446260008
  ],
  [
      124.6292815389335,
      20.015850124787775
  ],
  [
      122.63760467742009,
      20.15752307716446
  ],
  [
      120.66121241071818,
      20.442675205787413
  ],
  [
      118.70408530182762,
      20.86790277142721
  ],
  [
      116.79170861033721,
      21.42210985480264
  ],
  [
      114.9059489799626,
      22.104612105429727
  ],
  [
      113.07193972191213,
      22.899962289219026
  ],
  [
      111.29275992116331,
      23.797737280751814
  ],
  [
      109.5486782684326,
      24.80081751596928
  ],
  [
      107.87549729486135,
      25.88001903651414
  ],
  [
      106.24150062412394,
      27.046928294509623
  ],
  [
      104.67085119030763,
      28.276317661142436
  ],
  [
      103.18798548026287,
      29.618864269169983
  ],
  [
      101.7934169692677,
      31.036058327142634
  ],
  [
      100.45267945315588,
      32.52848037973412
  ],
  [
      99.18859649215871,
      34.08568137234469
  ],
  [
      98.02027608690793,
      35.69699774783284
  ],
  [
      96.93832120253518,
      37.39295787853348
  ],
  [
      95.98046192406018,
      39.13155720341568
  ],
  [
      95.13471002847568,
      40.9533536913423
  ],
  [
      94.43052206551349,
      42.815919003436385
  ],
  [
      93.86692014805227,
      44.73872304333001
  ],
  [
      93.45609390421541,
      46.69967851711494
  ],
  [
      93.2026093812082,
      48.676668467999534
  ],
  [
      93.10342534986715,
      50.688673081139235
  ],
  [
      93.15596128861245,
      52.67260779600742
  ],
  [
      93.35310202482249,
      54.66795625798684
  ],
  [
      93.68273724265896,
      56.63259416184721
  ],
  [
      94.13814324377324,
      58.5855395687361
  ],
  [
      94.70481957767193,
      60.50547441905819
  ],
  [
      95.37150955396599,
      62.39147167485494
  ],
  [
      96.12747225786393,
      64.24268308826494
  ],
  [
      96.96247003126888,
      66.05833702979237
  ],
  [
      97.86675608565378,
      67.83773633943592
  ],
  [
      98.84202011632918,
      69.59930358076096
  ],
  [
      99.85819150230391,
      71.30418108160293
  ],
  [
      100.93542968048737,
      72.99905491736602
  ],
  [
      102.04905302631329,
      74.65488936636865
  ],
  [
      103.21093435011056,
      76.29849812609703
  ],
  [
      104.39509656067688,
      77.90157969270159
  ],
  [
      105.60803636858343,
      79.4814423582541
  ],
  [
      106.85754749263914,
      81.05434793740233
  ],
  [
      108.12374888053384,
      82.60130023151531
  ],
  [
      109.41445297850919,
      84.13791966136978
  ],
  [
      110.70905250951367,
      85.64572156515065
  ],
  [
      112.02923934377432,
      87.15569216747235
  ],
  [
      113.35352319060607,
      88.64884459165692
  ],
  [
      114.68794634740254,
      90.13815579546124
  ],
  [
      116.0233524808067,
      91.61998591369556
  ],
  [
      117.36260607577009,
      93.10496204077953
  ],
  [
      118.70541836749894,
      94.60164703219849
  ],
  [
      120.03526609200516,
      96.10268692768273
  ],
  [
      121.34402602502738,
      97.61307019933395
  ],
  [
      122.61689280582485,
      99.13476699261496
  ],
  [
      123.86617707505886,
      100.71306669600554
  ],
  [
      125.04188672142473,
      102.334503262572
  ],
  [
      126.1546704844832,
      103.99782897943258
  ],
  [
      127.21761717505599,
      105.69215976417287
  ],
  [
      128.22157677590624,
      107.411421824047
  ],
  [
      129.1677639663232,
      109.1690826702913
  ],
  [
      130.052276826919,
      110.97551183512901
  ],
  [
      130.85033178513834,
      112.79959087295052
  ],
  [
      131.56152929374855,
      114.66596954882425
  ],
  [
      132.1693214615965,
      116.57407729495411
  ],
  [
      132.65104969249944,
      118.51712522770744
  ],
  [
      132.97946877854315,
      120.49582545869798
  ],
  [
      133.11391671266415,
      122.48252062870947
  ],
  [
      133.0001517585842,
      124.48626926929039
  ],
  [
      132.56117395347354,
      126.43007568877935
  ],
  [
      131.70068560689592,
      128.2275754060438
  ],
  [
      130.35227659628538,
      129.6989729738012
  ],
  [
      128.60001270793094,
      130.64013885099905
  ],
  [
      126.64862748672066,
      131.04933447524996
  ],
  [
      124.66159848499295,
      130.94335856372118
  ],
  [
      122.77103583085534,
      130.30353735586255
  ],
  [
      121.08075714881714,
      129.22830831909644
  ],
  [
      119.6242502584457,
      127.86099120324849
  ],
  [
      118.38108963195975,
      126.31342552089225
  ],
  [
      117.29951077204754,
      124.62504611014936
  ],
  [
      116.36626159565705,
      122.85613073665218
  ],
  [
      115.55745299530027,
      121.03224713468552
  ],
  [
      114.85293474686144,
      119.16417539102585
  ],
  [
      114.23619085086321,
      117.251080365718
  ],
  [
      113.69586834088746,
      115.33408995373384
  ],
  [
      113.04927364940484,
      113.43201140358181
  ],
  [
      112.29374096260138,
      111.58678815775993
  ],
  [
      111.45052913200237,
      109.7781739339421
  ],
  [
      110.52930256299008,
      108.00028143199035
  ],
  [
      109.54090549505977,
      106.26166326377052
  ],
  [
      108.48501936455908,
      104.5561769837644
  ],
  [
      107.36840700726862,
      102.89289411846735
  ],
  [
      106.1944137519967,
      101.27603998801143
  ],
  [
      104.96317313460877,
      99.70640799453459
  ],
  [
      103.67177366694982,
      98.18253708698529
  ],
  [
      102.31438198780361,
      96.70171395694278
  ],
  [
      100.90668707304944,
      95.28439433002515
  ],
  [
      99.44140574830026,
      93.92589250023663
  ],
  [
      97.92202795347053,
      92.63287493568959
  ],
  [
      96.33780241084348,
      91.40060033655124
  ],
  [
      94.70509375152683,
      90.24572306909043
  ],
  [
      93.02739027968487,
      89.17268163041092
  ],
  [
      91.29191437269002,
      88.1763581417054
  ],
  [
      89.50014199592825,
      87.26182976434566
  ],
  [
      87.68873003871475,
      86.44853429789704
  ],
  [
      85.82663896811968,
      85.72289556284369
  ],
  [
      83.91536349520925,
      85.08861902835034
  ],
  [
      81.995453125,
      84.55878125000001
  ],
  [
      80.05207616645272,
      84.1269782389023
  ],
  [
      78.06784180396616,
      83.78984839480833
  ],
  [
      76.08701579745951,
      83.55350582001303
  ],
  [
      74.09276191754539,
      83.41268230800426
  ],
  [
      72.08835599599256,
      83.36561713752974
  ],
  [
      70.10017904981517,
      83.40912187849614
  ],
  [
      68.09756741116617,
      83.54061112522652
  ],
  [
      66.10707434739624,
      83.75562096657134
  ],
  [
      64.13260936019071,
      84.04932984569888
  ],
  [
      62.16533635718098,
      84.41923886833128
  ],
  [
      60.20822362416972,
      84.86156485344027
  ],
  [
      58.282229569911955,
      85.3814476801157
  ],
  [
      56.38210726912028,
      86.01922984452783
  ],
  [
      54.49846653653274,
      86.69415765421871
  ],
  [
      52.64128204611409,
      87.40498888358545
  ],
  [
      50.78918916120381,
      88.16278759605625
  ],
  [
      48.95611383711582,
      88.96506879319126
  ],
  [
      47.14113812284265,
      89.81471042644023
  ],
  [
      45.35728700918344,
      90.70684580142351
  ],
  [
      43.59224508926925,
      91.64740917162993
  ],
  [
      41.847573906786735,
      92.63325920013898
  ],
  [
      40.12293093986716,
      93.65773021234037
  ],
  [
      38.42270871960372,
      94.70409592546709
  ],
  [
      36.72567043528706,
      95.761436079612
  ],
  [
      35.01839490337204,
      96.80077420354192
  ],
  [
      33.27183431536797,
      97.78612655135966
  ],
  [
      31.484058788704687,
      98.65364004554715
  ],
  [
      29.607561185888947,
      99.36035092696733
  ],
  [
      27.671807830810547,
      99.84966107940673
  ],
  [
      25.680760204315185,
      100.11216222095489
  ],
  [
      23.691460118837654,
      100.16460457539372
  ],
  [
      21.696282823712565,
      100.04545301901712
  ],
  [
      19.71926624241937,
      99.79206373947927
  ],
  [
      17.741265370309353,
      99.43150656093655
  ],
  [
      15.790504199139773,
      98.99215794415957
  ],
  [
      13.852794421491097,
      98.48934002976728
  ],
  [
      13.505967732869971,
      100.24900376157153
  ],
  [
      13.346792506365368,
      102.24778589706384
  ],
  [
      13.225209357954288,
      104.2393651024271
  ],
  [
      13.141578899466827,
      106.23511087827166
  ],
  [
      13.097224642605847,
      108.24553934237396
  ],
  [
      13.094107273298011,
      110.24449195119512
  ],
  [
      13.132841277306273,
      112.23097955006587
  ],
  [
      13.215196186065674,
      114.2270118255615
  ],
  [
      13.343162814135663,
      116.23028545120731
  ],
  [
      13.516465518195577,
      118.21639637001012
  ],
  [
      13.738154157603509,
      120.20602441258029
  ],
  [
      14.009984857614153,
      122.19685616935331
  ],
  [
      14.329975364950046,
      124.16585955603448
  ],
  [
      14.702377754139334,
      126.132365642543
  ],
  [
      15.128654065481564,
      128.09407192457033
  ],
  [
      15.605106576293124,
      130.0293679281813
  ],
  [
      16.137089458223304,
      131.95622483377986
  ],
  [
      16.725708007468842,
      133.87237318386508
  ],
  [
      17.365557399094104,
      135.75766766524316
  ],
  [
      18.062970729543434,
      137.62871658655388
  ],
  [
      18.818630628265833,
      139.48330683186143
  ],
  [
      19.633053018918375,
      141.31924698759383
  ],
  [
      20.498586340274258,
      143.118404143082
  ],
  [
      21.422623756582965,
      144.89557649872592
  ],
  [
      22.396441398876647,
      146.63365805802545
  ],
  [
      23.42786556266465,
      148.34655295574518
  ],
  [
      24.516521640360356,
      150.03223563838006
  ],
  [
      25.65211811359669,
      151.67515551353424
  ],
  [
      26.842941290564834,
      153.2878976884782
  ],
  [
      28.0777215806335,
      154.855954792974
  ],
  [
      29.364947543592002,
      156.39104984594422
  ],
  [
      30.692422470683088,
      157.87971929671465
  ],
  [
      32.068731839967086,
      159.3328426941579
  ],
  [
      33.48080898866815,
      160.7379987101836
  ],
  [
      34.94850482305286,
      162.11553127098844
  ],
  [
      36.435517702036535,
      163.43303070778774
  ],
  [
      37.97292782743577,
      164.71987782545975
  ],
  [
      39.546370976646585,
      165.96438264949205
  ],
  [
      41.15243298774958,
      167.16522164225577
  ],
  [
      42.78735568256431,
      168.32115562380525
  ],
  [
      44.447023999145905,
      169.43103431880377
  ],
  [
      46.12695293779585,
      170.49380096934684
  ],
  [
      47.84542000656305,
      171.52196561525093
  ],
  [
      49.596513294888126,
      172.51211088525372
  ],
  [
      51.350825320132074,
      173.4492355106771
  ],
  [
      53.1462906569466,
      174.35459798768161
  ],
  [
      54.95129988365492,
      175.21271014431446
  ],
  [
      56.77731453847313,
      176.03010687642714
  ],
  [
      58.61143693494422,
      176.8018583389142
  ],
  [
      60.47819871245045,
      177.53836999624596
  ],
  [
      62.35491611515486,
      178.23035687504384
  ],
  [
      64.24966020872803,
      178.88059739543667
  ],
  [
      66.15451403669024,
      179.48557657722122
  ],
  [
      68.06793688410521,
      180.04348249840737
  ],
  [
      70.010971568609,
      180.55676365966397
  ],
  [
      71.94981840843707,
      181.00966409263015
  ]
]

function setup() {
  createCanvas(600, 600);
  background(255);
  noFill();
  lastX = lastY = 0;
}

let currentPointIndex = 0; // Track the current point index
let drawInterval = 1; // Number of frames to wait before drawing the next segment

function draw() {
  // Only draw if there are points available
  if (points.length > 0) {
    // Draw one segment at a time
    if (frameCount % drawInterval === 0 && currentPointIndex < points.length - 1) {
      drawBrush(
        3 * points[currentPointIndex][0], 
        3 * points[currentPointIndex][1], 
        3 * points[currentPointIndex + 1][0], 
        3 * points[currentPointIndex + 1][1]
      );
      currentPointIndex++; // Move to the next segment
    }
  }
  
  // Update and draw droplets
  updateDroplets();
}


function drawBrush(x1, y1, x2, y2) {
  let bristleCount = 15;
  let bristleLength = 30;
  let brushWidth = 45;
  
  for (let i = 0; i < bristleCount; i++) {
    let t = i / (bristleCount - 1);
    let x = lerp(x1, x2, t);
    let y = lerp(y1, y2, t);
    
    let angle = atan2(y2 - y1, x2 - x1);
    let perpendicular = angle + PI/2;
    
    for (let j = 0; j < 4; j++) {
      let bristleOffset = random(-brushWidth/4, brushWidth/4);
      let startX = x + cos(perpendicular) * bristleOffset;
      let startY = y + sin(perpendicular) * bristleOffset;
      
      let endX = startX + cos(angle) * bristleLength;
      let endY = startY + sin(angle) * bristleLength;
      
      stroke(0, 0, 0, random(40, 80));
      strokeWeight(random(8, 15));
      line(startX, startY, endX, endY);
      
      // Add paint droplets (reduced frequency)
      if (random() < 0.01) {
        droplets.push({
          x: endX,
          y: endY,
          size: random(2, 5),
          speed: random(0.1, 0.3),
          viscosity: random(0.97, 0.99),
          opacity: random(15, 40)
        });
      }
    }
  }
}

function updateDroplets() {
  for (let i = droplets.length - 1; i >= 0; i--) {
    let droplet = droplets[i];
    stroke(0, 0, 0, droplet.opacity);
    strokeWeight(droplet.size);
    
    let curve = sin(frameCount * 0.05 + droplet.x * 0.05) * 0.5;
    line(droplet.x, droplet.y, droplet.x + curve, droplet.y + droplet.speed);
    
    droplet.y += droplet.speed;
    droplet.x += curve * 0.01;
    
    droplet.speed *= droplet.viscosity;
    droplet.speed += 0.005 * (1 - droplet.viscosity);
    
    // Gradually reduce size and opacity
    droplet.size *= 0.995;
    droplet.opacity *= 0.995;
    
    if (droplet.y > height || droplet.speed < 0.01 || droplet.size < 0.5 || droplet.opacity < 5) {
      droplets.splice(i, 1);
    }
  }
}

function keyPressed() {
  if (key === ' ') {
    background(220);
    droplets = [];
    points = svgPathToPoints(svgPath); // Reset points on space
  }
}
